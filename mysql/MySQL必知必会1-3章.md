---
title: MySQL必知必会1-3章
date: 2020-08-10 14:15:35
tags: MySQL
---

这些章讲解了解SQL，使用MySQL。

<!--more-->

## 第一章，了解SQL

### 1.1.数据库基础

#### 1.1.1.什么是数据库

数据库是一个以某种有组织的方式存储的数据集合。理解数据库的一种最简单的方法就是将其想象为一个文件柜。此文件柜是一个存放数据的物理位置，不管是数据是以什么以及如何组织的。

**数据库(database)：保存有组织的数据的容器(通常是一个文件或一组文件)。**

#### 1.1.2.表

表是一种结构化的文件，可用来存储某种特定类型的数据。表可以保存顾客清单。产品目录，或者其他信息清单。

**表(table)：某种特定类型数据的结构化清单。**

这里关键的一点在于，存储在表中的数据是一种类型的数据或一个清单。绝不应该将顾客的清单与订单的清单存储在同一个数据库表中。这样做将使以后的检索和访问很困难。应该创建两个表，每个清单一个表。

数据库中的每个表都有一个名字，用来标识自己。此名字是唯一的，这表示数据库中没有其他表具有相同的名字。

**表名：表明的唯一性取决于多个因素，如数据库名和表名字等的结合。这表示，虽然在相同数据库中不能两次使用相同的表名，但在不同的数据库中却可以使用相同的表名。**

#### 1.1.3.列和数据类型

表由列组成，列中存储着表中某部分的信息。

**列(colum)：表中的一个字段。所有表都是由一个或多个列组成的。**

理解列的最好办法是将数据库表想象为一个网格。网格的每一列存储着一条特定的信息。例如，在顾客表中，一个列存储着顾客编号，另一个列存储着顾客名，而地址，城市，州以及邮政编码全都存储在各自的列中。

**分解数据：正确地将数据分解为多个列极为重要。例如，城市，州，邮政编码应该总是独立的列。通过把它分解开，才有可能利用特定的列队对数据进行排序和过滤(如，找出特定州或特定城市的所有顾客)。如果城市和州组合在一个列中，则按州进行排序或过滤会很困难。**

数据库中每个列都有相应的数据类型。数据类型定义列可以存储的数据种类例如，如果列中存储的为数字(或许是订单中的物品数)，则相应的数据类型应该为数据类型。如果列中存储的是日期，文本，注释，金额等，则应该用恰当的数据类型规定出来。

**数据类型(datatype)：所容许的数据的类型。每个列都有相应的数据类型，它限制(或容许)该列中存储的数据。**

数据类型限制可存储在列中的数据种类(例如，防止在数值字段中录入字符值)。数据类型还可以帮助正确地排序数据，并在优化磁盘使用方面起重要的作用。因此，在创建表时必须对数据类型给予特别的关注。

#### 1.1.4.行

表中的数据是按行存储的，所保存的每个记录存储在自己的行内。如果将表想象为网格，网格中垂直的列为表列，水平行为表行。例如，顾客表可以每行存储一个顾客。表中的行数为记录的总数。

**行(row)：表中的一个记录。**

#### 1.1.5.主键

表中每一行都应该有可以唯一标识自己的一列(或一组列)。一个顾客表可以使用顾客编号列，而订单表可以使用订单ID，雇员表可以使用雇员ID或雇员社会保险号。

**主键(primary key)：一列(或一组列)，其值能够唯一区分表总每个行**。

唯一标识表中每行的这个列(或这组列)称为主键。主键用来表示一个特定的行。没有主键，更新或删除表中特定行很困难，因此没有安全的方法保证只涉及相应的行。

**应该总是定义主键：虽然并不总是都需要主键，但大多数数据库设计人员都应保证他们所创建的每个表具有一个主键，以便于以后的数据操纵和管理。**

表中的任何列都可以作为主键，只要它满足以下条件。

1.任意两行都不具有相同的主键值。

2.每个行都必须具有一个主键值(主键值不允许NULL值)。

主键通常定义在表的一列上，但这并不是必需的，也可以多个列作为主键。在使用多列作为主键时，上述条件必须应用到构成主键的所有列，所有列值的组合必须是唯一的(但单个列的值可以不唯一)。

**主键的最好习惯：不更新主键列的值。不重用主键列的值。不再主键中使用可能会更改的值。**

还有一种非常重要的键，称为外键，我们将在第十五章中介绍。

### 1.2.什么是SQL

SQL是结构化查询语言的缩写。SQL是一种专门用来与数据库通信的语言。设计SQL的目的是很好地完成一项任务，即提供一种从数据库中读写数据的简单有效的方法。

SQL有如下优点。

1.SQL并不是某个特定数据库供应商专有的语言。几乎所有重要的DBMS都支持SQL，所以，学习此语言使你能与所有数据库打交道。

2.SQL简单易学。它的语句全都是由描述很强的英语单词组成，而且这些单词的数目不多。

3.SQL尽管看上去很简单，但它实际上是一种强有力的语言，灵活使用其语言元素，可以进行非常复杂和高级的数据库操作。

## 第二章，MySQL简介

### 2.1.什么是MySQL

数据的所有存储检索，管理和处理实际上由数据库软件-------DBMS(数据库管理系统)完成的。MySQL是一种DBMS，即它是一种数据库软件。

#### 2.1.1.客户机--服务器软件

DBMS可分为两类：一类为基于共享文件系统的DBMS,另一类为基于客户机---服务器的DBMS。前者用于桌面用途，通常不用于高端或更关键的应用。

MySQL,Oracle以及Microsoft SQL Server等数据库是基于客户机---服务器的数据库。客户机-服务器应用分为两个不同的部分。服务器部分是负责所有数据访问和处理的一个软件。这个软件运行在称为数据库服务器的计算机上。

与数据文件打交道的只有服务器软件。关于数据，数据添加，删除和数据更新的所有请求都由服务器软件完成。这些请求或更改来自运行客户机软件的计算机。客户机是与用户打交道的软件。例如，如果你请求一个按字母顺序列出的产品表，则客户机软件通过网络提交该请求给服务器软件。服务器软件处理这个请求，根据需要过滤，丢弃和排序数据，然后把结果返回到你的客户机软件。

## 第三章，使用MySQL

### 3.1.连接

MySQL与所有客户机---服务器DBMS一样，要求在能执行命令之前登陆到DBMS。登录名可以与网络登录名不相同(假定你使用网络)。MySQL在内部保存自己的用户列表，并且把每个用户与各种权限关联起来。

为了连接到MySQL,需要以下信息。

1.主机名(或计算机名)：如果连接到到本地MySQL服务器，为localhost。

2.端口(如果使用默认端口3303之外的端口)。

3.一个合法的用户名。

4.用户口令(如果需要的话)

在连接之后，你就可以访问你的登录名能够访问的任意数据库和表了。(登陆，访问控制和安全可参考第28章)。

### 3.2.选择数据库

在你最初连接到MySQL时，没有任何数据库打开供你使用。在你能执行任意数据库操作前，需要选择一个数据库。为此可使用USE关键字。

关键字(key word)：作为MySQL语言组成部分的一个保留字。绝不要用关键字命名一个表或列。

例如，为了使用crashcourse数据库，应该输入以下内容



```mysql
输入： USE  crashcourse
输出： Database changed
```

分析：USE语句并不返回任何结果。依赖于使用的客户机，显示某种形式的通知。例如，这里显示出的Database changed消息是mysql命令行实用程序在数据库选择成功后显示的。

记住，必须先使用USE打开数据库，才能读取其中的数据。

### 3.3.了解数据库和表

数据库，表，列，用户，权限等的信息被存储在数据库中和表中(MySQL使用MySQL来存储这些信息)。不过，内部的表一般不直接访问。可用MySQL的SHOW命令来显示这些消息(MySQL从内部表中提取这些信息)。

输入： SHOW   DATABASES

输出：

| Database           |
| :----------------- |
| information_schema |
| crashcourse        |
| mysql              |
| forta              |
| coldfusion         |
| flex               |
| test               |

分析：SHOW  DATABASES.返回可以数据库的一个列表。包含在这个列表中的可能是MySQL内部使用的数据库(如例子中的mysql和information_schema)。当然，你自己的数据库列表可能看上去与这里的不一样。

为了获得一个数据库内的表的列表，使用SHOW TABLES。如下所示

输入：  SHOW   TABLES

输出：

| Tables_in_crashcourse |
| --------------------- |
| customers             |
| orderitems            |
| orders                |
| products              |
| productnotes          |
| vendors               |

分析：SHOW   TABLES。返回当前选择的数据库内可用表的列表。

输入：  SHOW  COLUMNS  FROM  customers

输出：

| Field        | Type      | Null | key  | Dedault | Extra          |
| ------------ | --------- | ---- | ---- | ------- | -------------- |
| cust_id      | int(11)   | NO   | PRI  | NULL    | auto_increment |
| cust_name    | char(50)  | NO   |      |         |                |
| cust_address | char(50)  | YES  |      | NULL    |                |
| cust_city    | char(50)  | YES  |      | NULL    |                |
| cust_state   | char(5)   | YES  |      | NULL    |                |
| cust_zip     | char(10)  | YES  |      | NULL    |                |
| cust_country | char(50)  | YES  |      | NULL    |                |
| cust_contact | char(50)  | YES  |      | NULL    |                |
| cust_email   | char(255) | YES  |      | NULL    |                |

分析：SHOW  COLUMS要求给出一个表名(这个例子中的FROM customers)，它对每个字段返回一行，行中包含字段名，数据类型，是否允许NULL，键信息，默认值以及其他信息(如字段cust_id的auto_increment)。

**什么是自动增量：某些表列需要唯一值。在每个行添加到表中时，MySQL可以自动地为每个行分配为下一个可以编号，不用在添加一行时手动分配唯一值(这样做必须记住最后一次使用的值)。这个功能就是所谓的自动增量。如果需要它，则必须在用CREATE语句创建表时把它作为表定义的组成部分。**

**DESCRIBE语句：MySQL支持用DESCRIBE作为SHOW  COLUMNS  FROM的一种快捷方式。换句话说，DESCRIBE  customers是SHOW  COLUMNS  FROM  customers的一种快捷方式。**

所支持的其他SHOW语句还有：

1.SHOW STATUS：用来显示广泛的服务器状态信息。

2.SHOW  CREATE  DATABASE和SHOW  CREATE  TABLE：分别用来显示创建特定数据库或表的MySQL语句。

3.SHOW  GRANTS：用来显示授权用户(所有用户或特定用户)的安全权限。

4.SHOW  ERRORS  和SHOW  WARNINGS：用来显示服务器错误或警告信息。

值得注意的是，客户机应用程序使用与这里相同的MySQL语句。